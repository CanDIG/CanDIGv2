<source>
  @type forward
  @id input1
</source>

## filter out service-infos
<filter candigv2_opa_1>
  @type grep
  <exclude>
    key log
    pattern /service-info/
  </exclude>
</filter>


## format log messages
<filter **>
  @type parser
  key_name log
  reserve_data true
  reserve_time true
  remove_key_name_field true
  <parse>
    @type regexp
    expression /^level: (?<level>.+?), file: (?<file>.+?), message: {'message': "(?<message>.+)", 'user': '(?<user>\S+)', 'sid': '(?<sid>\S+)'}/
  </parse>
</filter>

<filter **>
  @type parser
  key_name log
  reserve_data true
  reserve_time true
  remove_key_name_field true
  <parse>
    @type regexp
    expression /^level: (?<level>.+?), file: (?<file>.+?), message: (?<message>.+)/
  </parse>
</filter>

<filter **>
  @type record_transformer
  remove_keys container_id, container_name
</filter>

<match *>
  @type file
  path /logging/
</match>
